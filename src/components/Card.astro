---
import Heading from "./Heading.astro";
import Text from "./Text.astro";

const { url, cardimage, cardimagealt, cardtitel, cardtime, progress, rank } =
  Astro.props;

const rankColorMap = {
  1: "text-sky-400",
  2: "text-orange-400",
  3: "text-pink-300",
};
const rankColor = rankColorMap[rank] || "";
---

<article class="h-full">
  <a href={url} class="group h-full flex flex-col">
    <div class="relative">
      <!-- INDRE WRAPPER: fast mobil-højde + overflow-hidden så billede ikke skubber layout -->
      <div class="relative overflow-hidden rounded-xl">
        <!-- BILLEDE -->
        <img
          src={cardimage}
          alt={cardimagealt}
          class="duration-200 group-hover:scale-110"
        />

        <!-- PLAY-KNAP -->
        <img
          src="/img/play.svg"
          alt="Play"
          class="absolute top-1 right-1 md:top-2 md:right-2 w-10 h-10 md:w-14 md:h-14"
        />

        <!-- PROGRESS BAR -->
        {
          progress !== null && (
            <div
              class="absolute left-0 bottom-0 bg-red-500 h-[5px] md:h-[10px]"
              style={`width:${progress}%`}
            />
          )
        }
      </div>

      <!-- RANK -->
      {
        rank && (
          <Text
            stylingclasses={`absolute -left-2 -bottom-4 md:-bottom-8 lg:-bottom-10 font-bold leading-none ${rankColor} text-[80px] md:text-[150px] lg:text-[200px]`}
          >
            {rank}
          </Text>
        )
      }
    </div>

    <!-- TITEL OG TID: flex-column så tiden kan skubbes til bund med mt-auto -->
    <div class="mt-3 md:mt-4 flex flex-col flex-1">
      <Heading htmlheading="h4" size="xsmall" stylingclasses="m-0"
        >{cardtitel}
      </Heading>

      <div class="mt-auto flex items-center gap-[5px] md:gap-[10px]">
        <img src="/img/ur.svg" alt="Ur" class="w-6 h-6" />
        <Text teksttype="brødtekst">{cardtime}</Text>
      </div>
    </div>
  </a>
</article>
